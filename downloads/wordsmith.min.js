/*! Wordsmith 1.01 getwordsmith.co | http://getwordsmith.co/license/ */
(function(b){function i(){d&&d.remove();j=d=null}var d,j,a,e,f=!1;b.fn.wordsmith=function(m){a=b.extend({maxWordLength:18,popupWidth:600,popupHeight:400,lookupImage:"http://getwordsmith.co/images/Question_Mark.png",lookupMessage:"Lookup definition",lookupUrl:"http://define.getwordsmith.co/{word}"},m);b(document).on("mouseup",function(){f||i();f=!1});b(document).scroll(function(){f||i();f=!1});this.on("mouseup",function(n){var c;c="";window.getSelection?c=window.getSelection():document.getSelection?
c=document.getSelection():document.selection&&(c=document.selection.createRange().text);var l=c.toString().replace(/^\s+|\s+$/g,"").toLowerCase();if(0==l.length||l.length>=a.maxWordLength)i(),n.preventDefault();else if(0<l.length){var k=c.getRangeAt(0),g=b("<span/>"),h=document.createRange();h.setStart(c.focusNode,k.endOffset);h.insertNode(g[0]);var k=g.offset().left,h=g.offset().top,m=b(window).scrollTop();j&&j.x==k&&j.y==h?g.remove():(i(),d=b('<div id="wordsmith-question" style="'+("margin: 0; padding: 0; position: fixed; width: "+
e.width+"; height: "+e.height)+'"><a href="#" id="wordsmith-lookup" title="'+a.lookupMessage+'"><img src="'+a.lookupImage+'"/></a></div>'),j={sel:c,x:k,y:h},g.parent().append(d[0]),b("#wordsmith-lookup").on("mousedown",function(a){f=true;a.preventDefault();return false}),d.css({left:k-e.width/1.5,top:h-e.height/1.5-m}),g.remove(),b("#wordsmith-lookup").click(function(b){var c=a.lookupUrl.replace("{word}",l);window.open(c,"wordsmith","width="+a.popupWidth+",height="+a.popupHeight+",left="+(screen.width-
a.popupWidth)/2+",top="+(screen.height-a.popupHeight)/2+",location=1,scrollbars=1");b.preventDefault();return false}));n.preventDefault()}});this.on("mousedown",function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty();i();f=!0});e=new Image;e.src=a.lookupImage}})(jQuery);
